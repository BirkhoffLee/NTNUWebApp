import{r as s,a as e,o as t,c as o,b as r,d as a,t as n,F as i,e as l,w as d,f as u,v as c,g as m,h as g}from"./vendor.c218e9d7.js";const p={data:()=>({buttonClass:"",usernameClass:"",passwordClass:"",form:{username:"",password:""},buttonLabel:"",showResult:!1,data:{username:"",term:"",courses:[]}}),created(){this.resetFormStyle()},methods:{resetFormStyle(){this.buttonLabel="登入",this.buttonClass="bg-indigo-600 hover:bg-indigo-700",this.usernameClass="focus:ring-indigo-500 focus:border-indigo-500",this.passwordClass="focus:ring-indigo-500 focus:border-indigo-500"},toggleUsername(){"focus:ring-indigo-500 focus:border-indigo-500"==this.usernameClass?this.usernameClass="focus:ring-red-500 focus:border-red-500":this.usernameClass="focus:ring-indigo-500 focus:border-indigo-500"},togglePassword(){"focus:ring-indigo-500 focus:border-indigo-500"==this.passwordClass?this.passwordClass="focus:ring-red-500 focus:border-red-500":this.passwordClass="focus:ring-indigo-500 focus:border-indigo-500"},toggleButton(){"bg-indigo-600 hover:bg-indigo-700"==this.buttonClass?this.buttonClass="bg-red-600 hover:bg-red-700":this.buttonClass="bg-indigo-600 hover:bg-indigo-700"},async onSubmit(){this.resetFormStyle(),/^[a-z0-9]+$/i.test(this.form.username)&&9==this.form.username.length||(this.$refs.username.focus(),this.toggleUsername()),this.form.password||(this.$refs.password.focus(),this.togglePassword());const t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:this.form.username,password:this.form.password})},o=await fetch("https://api.birkhoff.me/v1/ntnuFinalSurvey",t),r=await o.json();console.log(r),"Invalid username/password pair"===(null==r?void 0:r.message)&&(this.buttonLabel="帳號或密碼錯誤",this.$refs.password.focus(),this.toggleButton()),this.data.username=r.username,this.data.term=r.term,this.data.courses=r.coursesData.map((t=>{const o="Y"===t.completeFlag;return{name:t.courseChn,ct_pk:t.ct_pk,completed:o,icon:o?s:e,iconBackground:o?"bg-green-500":"bg-red-500"}})),this.showResult=!0}}},f={class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},h={class:"max-w-md w-full space-y-8"},b=r("img",{class:"mx-auto h-12 w-auto",src:"https://tailwindui.com/img/logos/workflow-mark-indigo-600.svg"},null,-1),w={key:0,class:"mt-6 text-center text-3xl font-extrabold text-gray-900"},y={key:1,class:"mt-6 text-center text-3xl font-extrabold text-gray-900"},x={key:2,class:"mt-2 text-center text-sm text-gray-600"},v={key:0,class:"flow-root"},C={class:"-mb-8"},k={class:"relative pb-8"},S={key:0,class:"absolute top-4 left-4 -ml-px h-full w-0.5 bg-gray-200","aria-hidden":"true"},j={class:"relative flex space-x-3"},R={class:"min-w-0 flex-1 pt-1.5 flex justify-between space-x-4"},F={class:"text-sm text-gray-500"},U={class:"rounded-md shadow-sm -space-y-px"},B=r("label",{for:"username",class:"sr-only"},"學號",-1),L=r("label",{for:"password",class:"sr-only"},"密碼",-1);p.render=function(s,e,g,p,$,z){return t(),o("div",f,[r("div",h,[r("div",null,[b,$.showResult?a("",!0):(t(),o("h2",w," 使用 NTNU 帳號登入 ")),$.showResult?(t(),o("h2",y,n($.data.term)+" 期末評鑑填寫結果 ",1)):a("",!0),$.showResult?a("",!0):(t(),o("p",x," 帳號密碼不會被儲存 "))]),$.showResult?(t(),o("div",v,[r("ul",C,[(t(!0),o(i,null,l($.data.courses,((s,e)=>(t(),o("li",{key:s.ct_pk},[r("div",k,[e!==$.data.courses.length-1?(t(),o("span",S)):a("",!0),r("div",j,[r("div",null,[r("span",{class:[s.iconBackground,"h-8 w-8 rounded-full flex items-center justify-center ring-8 ring-white"]},[(t(),o(m(s.icon),{class:"h-5 w-5 text-white","aria-hidden":"true"}))],2)]),r("div",R,[r("div",null,[r("p",F,n(s.name),1)])])])])])))),128))])])):a("",!0),$.showResult?a("",!0):(t(),o("form",{key:1,class:"mt-8 space-y-6",onSubmit:e[3]||(e[3]=d(((...s)=>z.onSubmit&&z.onSubmit(...s)),["prevent"]))},[r("div",U,[r("div",null,[B,u(r("input",{class:[[$.usernameClass],"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:z-10 sm:text-sm"],"onUpdate:modelValue":e[1]||(e[1]=s=>$.form.username=s),ref:"username",id:"username",name:"username",required:"",placeholder:"學號"},null,2),[[c,$.form.username]])]),r("div",null,[L,u(r("input",{class:[[$.passwordClass],"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:z-10 sm:text-sm"],"onUpdate:modelValue":e[2]||(e[2]=s=>$.form.password=s),ref:"password",id:"password",name:"password",type:"password",autocomplete:"current-password",required:"",placeholder:"密碼"},null,2),[[c,$.form.password]])])]),r("div",null,[r("button",{type:"submit",class:[[$.buttonClass],"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"]},n($.buttonLabel),3)])],32))])])};g({expose:[],setup:s=>(s,e)=>(t(),o(p))}).mount("#app");
